<!DOCTYPE html>
<html>
<head>
<meta charset="EUC-KR">
<title>Insert title here</title>
</head>
<body>
	<h3>주민등록번호 유효성 검사</h3>
	주민등록번호 : <input type ="text" id ="sisi">
	<button type ="button" onclick="proc2()">검사</button>
	<hr>
<!-- 	검사결과 :<span id ="res"></span><br> -->
	
	<script type="text/javascript">
		function proc2() {
// 			var check = document.getElementById("sisi").value;
// 			var M =parseInt(check.substr(13,1));
			

// 			var sum = (parseInt(check.substr(0,1)) * 2)
// 					+ (parseInt(check.substr(1,1)) * 3)
// 					+ (parseInt(check.substr(2,1)) * 4)
// 					+ (parseInt(check.substr(3,1)) * 5)
// 					+ (parseInt(check.substr(4,1)) * 6)
// 					+ (parseInt(check.substr(5,1)) * 7)
// 					+ (parseInt(check.substr(7,1)) * 8)
// 					+ (parseInt(check.substr(8,1)) * 9)
// 					+ (parseInt(check.substr(9,1)) * 2)
// 					+ (parseInt(check.substr(10,1)) * 3)
// 					+ (parseInt(check.substr(11,1)) * 4)
// 					+ (parseInt(check.substr(12,1)) * 5);
			
			
// 			var i = sum % 11 ;
			
// 			var j = 11 - i;
			
// 			if(j>=0 && j<=9){
				
// 			}else if(j==10){
// 				j=0;
// 			}else if(j==11){
// 				j=1;
// 			}
			
// 			var flag = false;
// 			if(j==M){
// 				flag = true;
// 				document.getElementById("res").innerHTML = flag;
// 			}else{
// 				flag = false;
// 				document.getElementById("res").innerHTML = flag;
// 			}
			
		//선생님 풀이
			var val =document.getElementById("sisi").value;
			// 123456-1234567
			// 1234561234567
			val = val.replace("-", ""); //1234561234567 모양으로 변환
			
			// val과 곱할 숫자
			var arr = [2,3,4,5,6,7,8,9,2,3,4,5];
			
			//1. val과 arr 곱하기 합계내기
			var sum = 0; //합계를 담을 변수
			for(var i = 0; i <12; i++) {
				sum += (parseInt(val.substr(i,1)) * arr[i]);	
			}
			
			// 자주사용 콘솔에 찍어서 잘 나오는지 확인하기
			console.log("총합: " + sum); 
			return;
			
			//2. 1번 합을 11로 나눈 나머지
			var tmp1 = sum % 11;
			//3. 11 - 2번
			var tmp2 = 11 - tmp1;
			//4. 0~9이면 그대로, 10이면 0, 11이면 1로 변환
			var tmp3;
			if(tmp2 == 10){
				tmp3 = 0;
			}else if(tmp2 == 11){
				tmp3 = 1;
			}else{
				tmp3 = tmp2;
			}
			
			//4번 결과와 M자리 값이 맞으면 맞음
			if(tmp3 == val.substr(12)){
				alert("정상입니다.");
			}else{ alert("오류입니다.");
			}
		}
			
	</script>
</body>
</html>